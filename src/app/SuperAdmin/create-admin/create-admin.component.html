<p-toast />
<!-- <p-progressbar mode="indeterminate" [style]="{ height: '6px' }" color="#343a40" /> -->
<div class="container my-4">
    <p-stepper [value]="1" class="basis-[50rem]">
        <p-step-list>
            <p-step [value]="1">Personal Details</p-step>
            <p-step [value]="2">Company</p-step>
            <p-step [value]="3">Submit</p-step>
        </p-step-list>
        <p-step-panels>
            <p-step-panel [value]="1">
                <ng-template #content let-activateCallback="activateCallback">
                    <div class="container">
                        <form [formGroup]="personalForm" (ngSubmit)="activateCallback(2)">

                            <div style="display: flex; flex-direction: row; justify-content: space-between;">

                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column; ">
                                    <label for="FirstName">First Name *</label>
                                    <input formControlName="FirstName" pInputText id="username" />
                                    <small id="username-error"></small>
                                </div>
                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="LastName">Middle Name</label>
                                    <input formControlName="LastName" pInputText id="username"
                                        aria-describedby="username-help" />
                                    <small id="username-help"></small>
                                </div>
                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="MiddleName">Last Name</label>
                                    <input formControlName="MiddleName" pInputText id="username"
                                        aria-describedby="username-help" />
                                    <small id="username-help"></small>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: row; justify-content: space-between;"
                                class="my-4">

                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="EmailID">Email *</label>
                                    <input formControlName="EmailID" pInputText id="username"
                                        aria-describedby="username-help" />
                                    <small id="username-help"></small>
                                </div>
                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="AddressLine1">Address 1 *</label>
                                    <input formControlName="AddressLine1" pInputText id="username"
                                        aria-describedby="username-help" />
                                    <small id="username-help"></small>
                                </div>
                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="AddressLine2">Address 2 *</label>
                                    <input formControlName="AddressLine2" pInputText id="username"
                                        aria-describedby="username-help" />
                                    <small id="username-help"></small>
                                </div>

                            </div>
                            <div style="display: flex; flex-direction: row; justify-content: space-between;"
                                class="my-4">

                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="Country">Country *</label>
                                    <p-select [options]="countryList" formControlName="Country" optionValue="countryId"
                                        optionLabel="countryName" placeholder="Select a Country" (onChange)="onCountryChange($event.value)"
                                        class="w-full md:w-56" />
                                    <!-- <input formControlName="countryID" pInputText id="username" aria-describedby="username-help" /> -->
                                    <small id="username-help"></small>
                                </div>
                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="State">State *</label>
                                    <p-select [options]="filteredStates" formControlName="State" optionValue="stateId" optionLabel="stateName"
                                        placeholder="Select a State" class="w-full md:w-56" />
                                    <small id="username-help"></small>
                                </div>
                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="City">City *</label>
                                    <input formControlName="City" pInputText id="username"
                                        aria-describedby="username-help" />
                                    <small id="username-help"></small>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: row; justify-content: start;" class="my-4">
                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="Zipcode">Zip Code *</label>
                                    <input formControlName="Zipcode" pInputText id="username"
                                        aria-describedby="username-help" />
                                    <small id="username-help"></small>
                                </div>
                                <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                    <label for="UserName">UserName *</label>
                                    <input formControlName="UserName" pInputText id="username"
                                        aria-describedby="username-help" />
                                    <small id="username-help"></small>
                                </div>
                            </div>
                            <div class="d-flex pt-6 justify-content-end">
                                <a class="btn btn-danger mx-2" routerLink="/">Cancel</a>
                                <p-button type="submit" [disabled]="!personalForm.valid" label="Next"
                                    icon="pi pi-arrow-right" iconPos="right" />
                            </div>
                        </form>
                    </div>
                </ng-template>
            </p-step-panel>

            <p-step-panel [value]="2">
                <ng-template #content let-activateCallback="activateCallback">

                    <form [formGroup]="companyForm" (ngSubmit)="submit()">

                        <div style="display: flex; flex-direction: row; justify-content: space-between;">

                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column; ">
                                <label for="CompanyName">Company Name *</label>
                                <input formControlName="CompanyName" pInputText id="CompanyName" />
                                <small id="CompanyName-error"></small>
                            </div>
                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                <label for="GSTIN">GSTIN</label>
                                <input formControlName="GSTIN" pInputText id="GSTIN" aria-describedby="GSTIN-help" />
                                <small id="GSTIN-help"></small>
                            </div>
                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                <label for="CIN">CIN</label>
                                <input formControlName="CIN" pInputText id="CIN" aria-describedby="CIN-help" />
                                <small id="CIN-help"></small>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: row; justify-content: space-between;" class="my-4">

                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                <label for="CAddress2">Address 1 *</label>
                                <input formControlName="CAddress2" pInputText id="CAddress2"
                                    aria-describedby="CAddress2-help" />
                                <small id="CAddress2-help"></small>
                            </div>
                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                <label for="CAddress3">Address 2 *</label>
                                <input formControlName="CAddress3" pInputText id="CAddress3"
                                    aria-describedby="CAddress3-help" />
                                <small id="CAddress3-help"></small>
                            </div>
                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                <label for="CCountry">Country *</label>
                                <p-select [options]="countryList" formControlName="CCountry" optionValue="countryId" optionLabel="countryName"
                                (onChange)="onCountryChange($event.value)" placeholder="Select a Country" class="w-full md:w-56" />
                                <!-- <input formControlName="countryID" pInputText id="username" aria-describedby="username-help" /> -->
                                <small id="CCountry-help"></small>
                            </div>

                        </div>
                        <div style="display: flex; flex-direction: row; justify-content: space-between;" class="my-4">

                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                <label for="CState">State *</label>
                                <p-select [options]="filteredStates" formControlName="CState" optionValue="stateId" optionLabel="stateName"
                                    placeholder="Select a State" class="w-full md:w-56" />
                                <small id="CState-help"></small>
                            </div>
                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                <label for="CCity">City *</label>
                                <input formControlName="CCity" pInputText id="CCity"
                                    aria-describedby="CCity-help" />
                                <small id="CCity-help"></small>
                            </div>
                            <div class="flex flex-col gap-2 col-4" style="display: flex; flex-direction: column;">
                                <label for="CZipcode">Pin Code *</label>
                                <input formControlName="CZipcode" pInputText id="CZipcode"
                                    aria-describedby="CZipcode-help" />
                                <small id="CZipcode-help"></small>
                            </div>
                        </div>
                        <div class="d-flex mb-4 justify-content-end">
                            <p-button label="Back" severity="secondary" styleClass="px-4"
                                (onClick)="activateCallback(1)" />
                            <p-button [disabled]="!companyForm.valid" label="Add" icon="pi pi-arrow-right"
                               (click)="addcompany()" iconPos="right" class="mx-3" />

                            <p-button type="submit" [disabled]="!isAllFormValid()" label="Submit"
                                icon="pi pi-arrow-right" iconPos="right" />
                        </div>
                    </form>

                    <p-table [value]="companyObjects" showGridlines [tableStyle]="{ 'min-width': '50rem' }">
                        <ng-template #header>
                            <tr>
                                <th>Company Name</th>
                                <th>GSTIN</th>
                                <th>CIN</th>
                                <th>Address 1</th>
                                <th>Address 2</th>
                                <th>City</th>
                                <th>State</th>
                                <th>Country</th>
                                <th>Zipcode</th>
                                <th>Actions</th>
                            </tr>
                        </ng-template>
                        <ng-template #body let-company>
                            <tr>
                                <td>{{company.CompanyName}}</td>
                                <td>{{company.GSTIN}}</td>
                                <td>{{company.CIN}}</td>
                                <td>{{company.CAddress2}}</td>
                                <td>{{company.CAddress3}}</td>
                                <td>{{company.CCity}}</td>
                                <td>{{ findState(company.CState )}}</td>
                                <td>{{ findCountry(company.CCountry )}}</td>
                                <td>{{company.CZipcode}}</td>
                                <td>
                                    <div class="row" style="justify-content: center;">
                                        <button class="btn btn-primary" (click)="editClick(company.CompanyName)"><i class="fa fa-edit"></i></button>
                                        <button class="btn btn-danger" (click)="deleteClick(company.CompanyName)"><i class="fa fa-trash-alt"></i></button>
                                    </div>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                    <!-- <div class="container"> -->
                    <!-- <div style="display: flex; flex-direction: row; justify-content: space-between; width: 100%;">
                        <div style="display: flex; flex-direction: column; justify-content: center; width: fit-content;"
                            class="my-4 col-5">
                            <p style="font-weight: 500; text-align: center;">Current Address</p>
                            <div class="flex flex-col gap-2"
                                style="display: flex; flex-direction: column; margin-top: 12px;">
                                <label for="username">Address 1</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">Address 2</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">Country</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">State</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">City</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">Pin Code</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; justify-content: center; width: fit-content;"
                            class="my-4 col-5">
                            <p style="font-weight: 500; text-align: center;">Permanent Address</p>
                            <div style="display: flex;flex-direction: row; justify-content: center;">
                                <p style="font-weight: 100;font-size: 12px; font-family: sans-serif; margin: 0;">Same as
                                    Current Address &nbsp;</p>
                                <p-checkbox />
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column; ">
                                <label for="username">Address 1</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">Address 2</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">Country</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">State</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">City</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                            <div class="flex flex-col gap-2" style="display: flex; flex-direction: column;">
                                <label for="username">Pin Code</label>
                                <input pInputText id="username" aria-describedby="username-help" />
                                <small id="username-help"></small>
                            </div>
                        </div>
                    </div> -->

                    <!-- <div class="d-flex pt-6 justify-content-end ">
                        <p-button label="Back" severity="secondary" styleClass="px-4" (onClick)="activateCallback(2)" />
                        <p-button label="Submit" icon="pi pi-arrow-right" iconPos="right" styleClass="ml-2"
                            (onClick)="activateCallback(3)" />
                    </div> -->
                </ng-template>
            </p-step-panel>

            <p-step-panel [value]="3">
                <ng-template #content let-activateCallback="activateCallback">
                </ng-template>
            </p-step-panel>
        </p-step-panels>
    </p-stepper>
</div>